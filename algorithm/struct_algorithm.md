# 二叉树（Binary Tree）

二叉树（Binary Tree）是一种特殊的树类型，其每个节点最多只能有两个子节点。这两个子节点分别称为当前节点的左孩子（left child）和右孩子（right child）。

### 完全二叉树和满二叉树

完全二叉树（Complete Binary Tree）：深度为 h，有 n 个节点的二叉树，当且仅当其每一个节点都与深度为 h 的满二叉树中，序号为 1 至 n 的节点对应时，称之为完全二叉树。

满二叉树（Full Binary Tree）：一棵深度为 h，且有 2h - 1 个节点称之为满二叉树。


| | 完全二叉树 | 满二叉树|
| ------| ------ | ------ |
| 总节点数 k | 2^h-1 <= k < 2h - 1 |  k = 2^h - 1 |
| 树高 h | h = log2k + 1 | h = log2(k + 1) |

### 二叉查找树（Binary Search Tree）

二叉查找树（BST：Binary Search Tree）是一种特殊的二叉树，它改善了二叉树节点查找的效率。二叉查找树有以下性质：

对于任意一个节点 n，

* 其左子树（left subtree）下的每个后代节点（descendant node）的值都小于节点 n 的值；
* 其右子树（right subtree）下的每个后代节点的值都大于节点 n 的值。

所谓节点 n 的子树，可以将其看作是以节点 n 为根节点的树。子树的所有节点都是节点 n 的后代，而子树的根则是节点 n 本身。

对于线性的连续的数组来说，遍历数组采用的是单向的迭代法。从第一个元素开始，依次向后迭代每个元素。而 BST 则有三种常用的遍历方式：

* 前序遍历（Perorder traversal）
* 中序遍历（Inorder traversal）
* 后序遍历（Postorder traversal）


### 自平衡二叉查找树（Self-Balancing Binary Search Tree）
实际上，BST 操作的运行时间与树的高度（Height）是有关系的。一个树的高度指的是从树的根开始所能到达的最长的路径长度。树的高度可被递归性地定义为：

* 如果节点没有子节点，则高度为 0；
* 如果节点只有一个子节点，则高度为该子节点的高度加 1；
* 如果节点有两个子节点，则高度为两个子节点中高度较高的加 1；

计算树的高度要从叶子节点开始，首先将叶子节点的高度置为 0，然后根据上面的规则向上计算父节点的高度。以此类推直到树中所有的节点高度都被标注后，则根节点的高度就是树的高度。

**如果树中节点的数量为 n，则一棵满足O(log2n) 渐进运行时间的 BST 树的高度应接近于比 log2n 小的最大整数。**

一棵平衡树指的是树能够保持其高度与广度能够保持预先定义的比例。不同的数据结构可以定义不同的比例以保持平衡，但所有的比例都趋向于log2n。那么，一颗自平衡的 BST 也同样呈现出 O(log2n) 的渐进运行时间。

### AVL 树

在 1962 年，俄罗斯数学家 G. M. Andel'son-Vel-skii 和 E. M. Landis 发明了第一种自平衡二叉查找树，叫做 AVL 树。AVL 树必须维持如下平衡条件，对每个节点 n：

* 节点 n 的左子树的高度与右子树的高度的差至多是 1。
 
节点的左子树或者右子树的高度可以通过上面描述的步骤来计算。如果节点仅有一个子节点，则无子节点侧的高度为 -1。

### 红黑树（Red-Black Tree）

在 1972 年，慕尼黑理工大学（Technical University of Munich）的计算机科学家 Rudolf Bayer 创造了红黑树（Red-Black Tree）数据结构。除了包含数据和左右孩子节点之外，红黑树的节点还包含了一项特别的信息 -- 颜色。这个颜色只包含两种颜色，即红色和黑色。并且，红黑树还添加了一种特殊类型的节点，称为 NIL 节点。NIL 节点将做为红黑树的伪叶子节点出现。也就是说，所有带有关键数据的节点称为内节点，而所有其他的外节点则均指向 NIL 节点。这个概念可能理解起来有些费劲，希望下面这张图有所帮助。

红黑树（R-B Tree）需要满足如下性质：

1. 节点的颜色只能是红色或者黑色；
2. 根节点是黑色的；（根性质）
3. NIL 节点的颜色是黑色；
4. 如果节点的颜色是红色，则其子节点均为黑色；（红性质）
5. 从任一节点到其后代任一叶子节点的路径上的黑色节点的数量相同；（黑性质）